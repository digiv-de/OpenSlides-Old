<os-head-bar
    [hasMainButton]="canManage()"
    [editMode]="isEditing"
    [mainButtonIcon]="'edit'"
    [isSaveButtonEnabled]="startForm.valid"
    (mainEvent)="editStartPage()"
    (saveEvent)="saveChanges()"
    (cancelEditEvent)="isEditing = !isEditing"
>
    <div class="title-slot">
        <h2>{{ 'Home' | translate }}</h2>
    </div>
</os-head-bar>

<mat-card class="spacer-bottom-60" [ngClass]="isEditing ? 'os-form-card' : 'os-card'">
    <ng-container *ngIf="!isEditing">
        <div class="app-content">
            <h1>{{ startContent.general_event_welcome_title | translate }}</h1>

            <div [innerHTML]="startContent.general_event_welcome_text | trust: 'html'"></div>
        </div>
    </ng-container>

    <ng-container *ngIf="isEditing">
        <form [formGroup]="startForm">
            <mat-form-field>
                <input
                    matInput
                    formControlName="general_event_welcome_title"
                    required
                    placeholder="{{ 'Front page title' | translate }}"
                />
                <mat-error>{{ 'The title is required' | translate }}</mat-error>
            </mat-form-field>
            <editor formControlName="general_event_welcome_text" [init]="tinyMceSettings"></editor>
        </form>
    </ng-container>
</mat-card>

<mat-card *ngIf="apiUrl" [ngClass]="'os-card'" style="overflow: auto;">
    <ng-container>
        <div class="app-content" style="margin-left: 10px; margin-right:10px;">
            <div class="title-slot">
                <h2 style="margin-bottom: 5px;">Stimmung</h2>
            </div>
            <div class="proj-st-karten">
                <div class="proj-st-karte st-gruen">{{ stimmungApiData[0].anz }}</div>

                <div class="proj-st-karte st-gelb">{{ stimmungApiData[1].anz }}</div>

                <div class="proj-st-karte st-rot">{{ stimmungApiData[2].anz }}</div>   
            </div>
        </div>
    </ng-container>
</mat-card>